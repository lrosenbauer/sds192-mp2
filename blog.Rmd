---
title: "Mini-Project 2"
author: "Laura Rosenbauer, Kalani Williams, Maggie Carttar"
date: "March 24, 2017"
output: html_document
---


## Loading the data


```{r, include=FALSE}
library(dplyr)
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
library(dplyr)
library(ggplot2)
library(oilabs)
library(ggthemes)
library(tidyverse)
```
# Rename variable to facilitate join.
```{r}
house_elections <- rename(house_elections, cand_id = fec_id)
```

```{r}
house_contributions <- full_join(house_elections, contributions, by = "cand_id")

house_contributions <- house_contributions %>%
  filter(ge_winner != "")
```


```{r}
hc_stats <- house_contributions %>%
  group_by(cand_id) %>%
  mutate(parse_number(transaction_amt)) %>%
  # candidates with no transaction data were removed
  filter(tran_id != "NA") %>%
  summarise(total_contribution = sum(transaction_amt), n_contributions = n_distinct(tran_id), avg_contribution = total_contribution/n_contributions)
```

```{r}
hc_stats_2 <- left_join(hc_stats, house_elections, by = "cand_id") %>%
  select(cand_id, total_contribution, n_contributions, avg_contribution, candidate_name, party, ge_winner, incumbent)
```

```{r}
ggplot(data=hc_stats_2, aes(fill=incumbent, x=ge_winner)) + geom_bar()
```


```{r}
ggplot(data=hc_stats_2, aes(x = n_contributions, y = total_contribution, color = ge_winner, alpha = 7/10)) + geom_point()

ggplot(data=hc_stats_2, aes(x = n_contributions, y = total_contribution, color = party, alpha = 7/10)) + geom_point()
```

